(()=>{"use strict";var e={182:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getPreviousLineContaintingText=t.getSelectedLines=t.getIndentationStyle=t.fullDocumentRange=void 0;const r=n(496);t.fullDocumentRange=function(e){const t=e.lineCount-1;return new r.Range(0,0,t,e.lineAt(t).text.length)},t.getIndentationStyle=function(e){let t,n;return e.insertSpaces?(t=" ",n=e.tabSize):(t="\t",n=1),{tc:t,td:n,ts:e.tabSize}},t.getSelectedLines=function(e,t){return new r.Range(e.lineAt(t.start.line).range.start,e.lineAt(t.end.line).range.end)},t.getPreviousLineContaintingText=function(e,t){if(t.start.line>0){let n=t.start.line,r=e.lineAt(--n);for(;""===r.text.trim()&&n>0;)r=e.lineAt(--n);return r}}},412:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.formatTcl=t.guessPreIndentation=t.escapeToQuotedTcl=void 0,t.escapeToQuotedTcl=function(e){return e.replace(/\\/g,"\\\\").replace(/\$/g,"\\$").replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/"/g,'\\"').replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\x0b/g,"\\v").replace(/\x07/g,"\\a").replace(/\x08/g,"\\b").replace(/\x0c/g,"\\f")},t.guessPreIndentation=function(e,t,n,r){let s=e.text.substr(0,e.firstNonWhitespaceCharacterIndex),a=0,i=0;return" "===t?(a=Math.floor(s.replace(/\t/g," ".repeat(r)).length/r)*n,i=s.replace(/\t/g," ".repeat(r)).length%r):a=s.replace(new RegExp(" ".repeat(r),"g"),"\t").length,/^#/.test(e.text.trim())||(/\{$/.test(e.text.trim())?a+=n:/\{\s*\}$/.test(e.text.trim())||/\}$/.test(e.text.trim())&&a>0&&(a-=n)),t.repeat(a)+" ".repeat(i)},t.formatTcl=function(e,t="",n=" ",r=4){let s=0,a=[],i=!1,o=!1;return e.split("\n").forEach((e=>{let c=e.trim();""===c?a.push(""):/^#/.test(c)||/\b\{\s*\}$/.test(c)?a.push(t+n.repeat(s)+c):/\{$/.test(c)||/^\{$/.test(c)?(/^\}/.test(c)&&(s-=r),a.push(t+n.repeat(s)+c),o?o=!1:s+=r):/^\}$/.test(c)||!i&&/^\}[^\{]+\{[^\}]+\}\s*\{[^\}]+\}$/.test(c)||!i&&/^\}[^\]]+\]$/.test(c)?(s-=r,s<0&&(s=0,t=t.substr(r,t.length-r)),a.push(t+n.repeat(s)+c)):!i&&/\w+\s+\{[^\{\}]+$/.test(c)?(a.push(t+n.repeat(s)+c),s+=r,o=!0):!i&&/\\$/.test(c)?(a.push(t+n.repeat(s)+c),s+=r,i=!0):i&&/\{\s+\\$/.test(c)||i&&/\[[^\t {\[["()\]}]+\s+\\$/.test(c)?(a.push(t+n.repeat(s)+c),s+=r):i&&/^\\?[\]})]\s*\\$/.test(c)?(s-=r,s<0&&(s=0,t=t.substr(r,t.length-r)),a.push(t+n.repeat(s)+c)):i&&/^\\?[\]})"]$/.test(c)?(s-=r,s<0&&(s=0,t=t.substr(r,t.length-r)),a.push(t+n.repeat(s)+c),s-=r,i=!1):i&&/\\?[\]})"]$/.test(c)?(a.push(t+n.repeat(s)+c),s-=r,i=!1):i&&/\\$/.test(c)?a.push(t+n.repeat(s)+c):i&&!/\\$/.test(c)?(a.push(t+n.repeat(s)+c),s-=r,i=!1):a.push(t+n.repeat(s)+c),s<0&&(s=0,t=t.substr(r,t.length-r))})),a.join("\n")}},496:e=>{e.exports=require("vscode")}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}var r={};(()=>{var e=r;Object.defineProperty(e,"__esModule",{value:!0}),e.deactivate=e.activate=void 0;const t=n(496),s=n(182),a=n(412);e.activate=function(e){t.languages.registerDocumentFormattingEditProvider("tcl",{provideDocumentFormattingEdits(e,n){const{tc:r,td:i,ts:o}=s.getIndentationStyle(n);return t.window.activeTextEditor?[t.TextEdit.replace(s.fullDocumentRange(e),a.formatTcl(e.getText(),"",r,i))]:[]}}),t.languages.registerDocumentRangeFormattingEditProvider("tcl",{provideDocumentRangeFormattingEdits(e,n,r){const{tc:i,td:o,ts:c}=s.getIndentationStyle(r);if(!t.window.activeTextEditor)return[];let l="",u=s.getPreviousLineContaintingText(e,n);void 0!==u&&(l=a.guessPreIndentation(u,i,o,c));let p=s.getSelectedLines(e,n);return[t.TextEdit.replace(p,a.formatTcl(e.getText(p),l,i,o))]}}),e.subscriptions.push(t.commands.registerCommand("tcl.escapeToQuotedTcl",(e=>{const n=t.window.activeTextEditor;if(!n)return;const r=[...n.selections];n.edit((e=>{for(const t of r)e.replace(t,a.escapeToQuotedTcl(n.document.getText(t)))}))})))},e.deactivate=function(){}})(),module.exports=r})();
//# sourceMappingURL=extension.js.map